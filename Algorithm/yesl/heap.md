# 힙

### 힙이란?

- 완전 이진 트리의 일종으로 우선순위 큐를 위하여 만들어진 자료구조이다.
- 현재 들어있는 데이터 중 최대값, 최소값을 찾아내는 연산을 쉽게 하기 위해 만들어진 자료구조이다.
- 힙은 크게 최대 힙과 최소 힙으로 나눌 수 있다.

### 힙의 종류

1. 최대 힙

- 루트 노드의 값이 가장 크다.
- 각 노드의 값이 부모 노드의 값보다 작거나 같은 힙을 얘기한다.

2. 최소 힙

- 루트 노드의 값이 가장 작다.
- 각 노드의 값이 부모 노드의 값보다 크거나 같은 힙을 얘기한다.

<img width="300" alt="힙의 종류" src="https://velog.velcdn.com/images%2Fhanif%2Fpost%2F08c9219d-7b33-4ee1-862c-20a111f757ee%2Fimage.png">

### 힙의 특징

1. 반정렬 구조

> 아래로 갈수록 커지거나(Min Heap) 아래로갈수록 작아지거나(Max Heap)인 반정렬 상태를 유지한다. 이러한 특징은 여러개 값들중 최댓값과 최소값을 빠르게찾는데 최적화 되어있다. 힙트리에서는 중복된 값을 허용한다.

2. 힙은 완전 이진트리구조

> 힙 데이터 구조는 완전이진트리 구조이다. 가장 아래 레벨을 제외한 모든 레벨에 노드로 차있는 동시에 한 노드는 항상 자식을 2개만 가지고 있을 수 있다.

<img width="300" alt="완전이진트리" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcwUOiA%2FbtrhUW8sRrE%2FpIZjJ5Y3pvNq9GL2Y50O61%2Fimg.png">

3. 힙은 Array 구조
   > 힙데이터 구조는 array를 통해 만들게 된다. index 0값에는 root노드가 들어오고 다음레벨에 자식 노드들이 들어오게 된다. 자식 노드를 찾는데 특별한 방법이 있다. Array는 위치를 찾을 때 index(i) 값을 통해 찾는다.

<img width="300" alt="배열구조" src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcihsZH%2FbtrhUkBJWVM%2F7lZks9VLYq39PkfSzgx4hK%2Fimg.png">

- 힙에서 부모 노드와 자식 노드는 특별한 규칙이 존재한다.
  > - <0부터 시작하는 인덱스의 경우>
  >   - 왼쪽 자식의 인덱스는 부모의 인덱스 \* 2 + 1
  >   - 오른쪽 자식의 인덱스는 부모의 인덱스 \* 2 + 2
  >   - 부모의 인덱스는 자식의 인덱스 / 2
  > - <1부터 시작하는 인덱스의 경우>
  >   - 왼쪽 자식의 인덱스는 부모의 인덱스 \* 2
  >   - 오른쪽 자식의 인덱스는 부모의 인덱스 \* 2 + 1
  >   - 부모의 인덱스는 자식의 인덱스 - 1 / 2

<img width="300" alt="힙의 특징" src="https://velog.velcdn.com/images%2Fhanif%2Fpost%2F7196a293-54aa-45d5-90fb-8ef831c92ad2%2Fimage.png">

### 힙의 연산

1. 삽입

<img width="300" alt="힙의 삽입" src="https://velog.velcdn.com/images%2Fhanif%2Fpost%2Fc98b091f-538c-47f5-a955-5ea38967321b%2Fimage.png">

1.  이진트리의 맨 마지막에 데이터를 추가한다.
2.  최대 힙 기준 맨 마지막에 삽입한 노드와 부모 노드를 비교한다.
3.  자신이 부모노드보다 값이 크다면 두 노드의 위치를 교환한다.
4.  더이상 교환하지 않을 때까지 2~3번 반복한다.

- 최소 힙이라면 2번에서 자신이 부모노드보다 값이 작다면 변경하면 된다.

2. 삭제

<img width="300" alt="힙의 삭제" src="https://velog.velcdn.com/images%2Fhanif%2Fpost%2Fd4eb5fea-e7a7-428b-97b4-cbb331955f25%2Fimage.png">

1.  이진트리의 루트노드 데이터를 삭제한다.
2.  현재 트리에서 가장 마지막에 있는 데이터를 루트 노드로 올린다.
3.  자신의 노드와 자식 노드를 비교한다.
4.  자식 노드 중 더 큰 값을 지닌 노드와 자신의 위치를 교환한다.
5.  더 이상 교환하지 않을 때까지 3~4번 반복한다.

- 최소 힙이라면 4번에서 자신이 자식노드보다 값이 작고, 자식 노드 중 더 작은 값을 지닌 노드와 교환하면 된다.

### 힙의 활용

- 우선순위 큐 구현: 데이터의 추가와 삭제가 빈번하게 발생하며, 우선순위에 따라 처리해야 하는 경우
- 효율적인 정렬 알고리즘: 힙 정렬(heap sort)은 힙의 속성을 이용해 배열을 정렬하는 방법
- 다양한 그래프 알고리즘에서 최소/최대 비용을 효율적으로 찾는 데 사용된다.
